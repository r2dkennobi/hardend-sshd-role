# {{ ansible_managed }}
# See the sshd_config(5) manpage for details
# vim: ft=sshdconfig syntax=jinja2

## Options in alphabetical order (same as the sshd_config(5) manpage)
# Allow client to pass locale environment variables
{% for accept_env in AcceptEnv %}
AcceptEnv {{ accept_env }}
{% endfor %}
AddressFamily {{ AddressFamily }}
AllowAgentForwarding {{ AllowAgentForwarding }}
{% for allow_group in AllowGroups %}
AllowGroups {{ allow_group }}
{% endfor %}
AllowTcpForwarding {{ AllowTcpForwarding }}
AllowStreamLocalForwarding {{ AllowStreamLocalForwarding }}
{% for allow_user in AllowUsers %}
AllowUsers {{ allow_user }}
{% endfor %}
AuthenticationMethods {{ AuthenticationMethods }}
AuthorizedKeysCommand {{ AuthorizedKeysCommand }}
AuthorizedKeysCommandUser {{ AuthorizedKeysCommandUser }}
{% TODO Fix me %}
{% if authorized_keys_file is not None %}
AuthorizedKeysFile {{ AuthorizedKeysFile }}
{% endif %}
AuthorizedPrincipalsCommand {{ AuthorizedPrincipalsCommand }}
AuthorizedPrincipalsCommandUser {{ AuthorizedPrincipalsCommandUser }}
AuthorizedPrincipalsFile {{ AuthorizedPrincipalsFile }}
Banner {{ Banner }}
# Change to yes to enable challenge-response passwords (beware issues with
# some PAM modules and threads)
ChallengeResponseAuthentication {{ ChallengeResponseAuthentication }}
ChrootDirectory {{ ChrootDirectory }}
Ciphers {{ Ciphers }}
ClientAliveCountMax {{ ClientAliveCountMax }}
ClientAliveInterval {{ ClientAliveInterval }}
Compression {{ Compression }}
DebianBanner {{ DebianBanner }}
DenyGroups {{ DenyGroups }}
{% for deny_group in DenyGroups %}
DenyGroups {{ deny_group }}
{% endfor %}
{% for deny_user in DenyUsers %}
DenyUsers {{ deny_user }}
{% endfor %}
FingerprintHash {{ FingerprintHash }}
ForceCommand {{ ForceCommand }}
GatewayPorts {{ GatewayPorts }}
# GSSAPI options
GSSAPIAuthentication {{ GSSAPIAuthentication }}
GSSAPIKeyExchange {{ GSSAPIKeyExchange }}
GSSAPICleanupCredentials {{ GSSAPICleanupCredentials }}
GSSAPIStrictAcceptorCheck {{ GSSAPIStrictAcceptorCheck }}
GSSAPIStoreCredentialsOnRekey {{ GSSAPIStoreCredentialsOnRekey }}
HostbasedAcceptedKeyTypes {{ HostbasedAcceptedKeyTypes }}
HostbasedAuthentication {{ HostbasedAuthentication }}
HostbasedUsesNameFromPacketOnly {{ HostbasedUsesNameFromPacketOnly }}
HostCertificate {{ HostCertificate }}
{% for sshd_host_key in HostKey %}
HostKey {{ sshd_host_key }}
{% endfor %}
HostKeyAgent {{ HostKeyAgent }}
HostKeyAlgorithms {{ HostKeyAlgorithms }}
# Don't read the user's ~/.rhosts and ~/.shosts files
IgnoreRhosts {{ IgnoreRhosts }}
# Don't trust ~/.ssh/known_hosts for RhostsRSAAuthentication
IgnoreUserKnownHosts {{ IgnoreUserKnownHosts }}
IPQoS {{ IPQoS }}
KbdInteractiveAuthentication {{ KbdInteractiveAuthentication }}
# Kerberos options
KerberosAuthentication {{ KerberosAuthentication }}
KerberosGetAFSToken {{ KerberosGetAFSToken }}
KerberosOrLocalPasswd {{ KerberosOrLocalPasswd }}
KerberosTicketCleanup {{ KerberosTicketCleanup }}
KexAlgorithms {{ KexAlgorithms }}
KeyRegenerationInterval {{ KeyRegenerationInterval }}
# Use these options to restrict which interfaces/protocols sshd will bind to
{% for sshd_listen_address in ListenAddress %}
ListenAddress {{ sshd_listen_address }}
{% endfor %}
LoginGraceTime {{ LoginGraceTime }}
LogLevel {{ LogLevel }}
MACs {{ MACs }}
MaxAuthTries {{ MaxAuthTries }}
MaxSessions {{ MaxSessions }}
MaxStartups {{ MaxStartups }}
# Change to no to disable tunnelled clear text passwords
PasswordAuthentication {{ PasswordAuthentication }}
# To enable empty passwords, change to yes (NOT RECOMMENDED)
PermitEmptyPasswords {{ PermitEmptyPasswords }}
{% for permit_open in PermitOpen %}
PermitOpen {{ permit_open }}
{% endfor %}
PermitRootLogin {{ PermitRootLogin }}
PermitTunnel {{ PermitTunnel }}
PermitTTY {{ PermitTTY }}
PermitUserEnvironment {{ PermitUserEnvironment }}
PermitUserRC {{ PermitUserRC }}
PidFile {{ PidFile }}
# What ports, IPs and protocols we listen for
Port {{ Port }}
PrintLastLog {{ PrintLastLog }}
PrintMotd {{ PrintMotd }}
Protocol {{ Protocol }}
PubkeyAcceptedKeyTypes {{ PubkeyAcceptedKeyTypes }}
PubkeyAuthentication {{ PubkeyAuthentication }}
RekeyLimit {{ RekeyLimit }}
{% for revoked_key in RevokedKeys %}
RevokedKeys {{ revoked_key }}
{% endfor %}
# For this to work you will also need host keys in /etc/ssh_known_hosts
RhostsRSAAuthentication {{ RhostsRSAAuthentication }}
RSAAuthentication {{ RSAAuthentication }}
# Lifetime and size of ephemeral version 1 server key
ServerKeyBits {{ ServerKeyBits }}
StreamLocalBindMask {{ StreamLocalBindMask }}
StreamLocalBindUplink {{ StreamLocalBindUplink }}
StrictModes {{ StrictModes }}
{% for subsystem in Subsystem %}
Subsystem {{ subsystem }}
{% endfor %}
SyslogFacility {{ SyslogFacility }}
TCPKeepAlive {{ TCPKeepAlive }}
{% for keys in TrustedUserCAKeys %}
TrustedUserCAKeys {{ keys }}
{% endfor %}
UseDNS {{ UseDNS }}
UseLogin {{ UseLogin }}
# Set this to 'yes' to enable PAM authentication, account processing,
# and session processing. If this is enabled, PAM authentication will
# be allowed through the ChallengeResponseAuthentication and
# PasswordAuthentication.  Depending on your PAM configuration,
# PAM authentication via ChallengeResponseAuthentication may bypass
# the setting of "PermitRootLogin without-password".
# If you just want the PAM account and session checks to run without
# PAM authentication, then enable this but set PasswordAuthentication
# and ChallengeResponseAuthentication to 'no'.
UsePAM {{ UsePAM }}
#Privilege Separation is turned on for security. Deprecated as of 7.5
UsePrivilegeSeparation {{ UsePrivilegeSeparation }}
VersionAddendum {{ VersionAddendum }}
X11DisplayOffset {{ X11DisplayOffset }}
X11Forwarding {{ X11Forwarding }}
X11UseLocalhost {{ X11UseLocalhost }}
XAuthLocation {{ XAuthLocation }}
